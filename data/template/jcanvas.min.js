/*
jCanvas v2.0
Caleb Evans
*/
(function(c){var a={},b=function(d,e){d.fillStyle=e.fillStyle;d.strokeStyle=e.strokeStyle;d.lineWidth=e.strokeWidth;d.lineCap=e.strokeCap;d.lineJoin=e.strokeJoin;d.shadowOffsetX=e.shadowX;d.shadowOffsetY=e.shadowY;d.shadowBlur=e.shadowBlur;d.shadowColor=e.shadowColor};a.originals={width:20,height:20,cornerRadius:0,fillStyle:"transparent",strokeStyle:"transparent",strokeWidth:5,strokeCap:"butt",strokeJoin:"miter",shadowX:0,shadowY:0,shadowBlur:10,shadowColor:"transparent",x:0,y:0,x1:0,y1:0,radius:10,start:0,end:360,ccw:false,inDegrees:true,fromCenter:true,closed:false,sides:3,angle:0,text:"",font:"normal 12pt sans-serif",align:"center",baseline:"middle",source:"",repeat:"repeat"};a.defaults=c.extend({},a.originals);c.fn.canvas=function(d){if(d===undefined){a.defaults=a.originals}else{a.defaults=c.extend({},a.defaults,d)}return this};c.fn.loadCanvas=function(d){if(d===undefined){d="2d"}return this[0].getContext(d)};c.fn.gradient=function(e){var d=this.loadCanvas(),g={x1:0,y1:0,x2:0,y2:0,r1:10,r2:100},l=c.extend({},g,e),k,j=0,h,f;if(e.r1!==undefined||e.r2!==undefined){k=d.createRadialGradient(l.x1,l.y1,l.r1,l.x2,l.y2,l.r2)}else{if(e.r1===undefined&&e.r2===undefined){k=d.createLinearGradient(l.x1,l.y1,l.x2,l.y2)}}for(f=1;f<=Number.MAX_VALUE;f+=1){if(l["c"+f]){j+=1}else{break}}for(f=1;f<=j;f+=1){h=Math.round((100/(j-1))*(f-1))/100;if(l["s"+f]===undefined){l["s"+f]=h}k.addColorStop(l["s"+f],l["c"+f])}return k};c.fn.pattern=function(f){var d=this.loadCanvas(),h=c.extend({},a.defaults,f),e=new Image();e.src=h.source;var g=d.createPattern(e,h.repeat);return g};c.fn.clearCanvas=function(f){var d=this.loadCanvas(),e={x:this.width()/2,y:this.height()/2,width:this.width(),height:this.height(),fromCenter:true},g=c.extend({},e,f);if(g.fromCenter===true){g.x-=(g.width/2);g.y-=(g.height/2)}d.beginPath();d.clearRect(g.x,g.y,g.width,g.height);d.closePath();return this};c.fn.drawRect=function(h){var l=this.loadCanvas(),g=c.extend({},a.defaults,h),i=Math.PI/180,f,k,e,j,d;b(l,g);if(g.fromCenter===true){g.x-=(g.width/2);g.y-=(g.height/2)}if(g.cornerRadius>0){f=g.x;k=g.y;e=g.x+g.width;j=g.y+g.height;d=g.cornerRadius;if((e-f)-(2*d)<0){d=(e-f)/2}if((j-k)-(2*d)<0){d=(j-k)/2}l.beginPath();l.moveTo(f+d,k);l.lineTo(e-d,k);l.arc(e-d,k+d,d,270*i,360*i,false);l.lineTo(e,j-d);l.arc(e-d,j-d,d,0,90*i,false);l.lineTo(f+d,j);l.arc(f+d,j-d,d,90*i,180*i,false);l.lineTo(f,k+d);l.arc(f+d,k+d,d,180*i,270*i,false);l.fill();l.stroke();l.closePath()}else{l.fillRect(g.x,g.y,g.width,g.height);l.strokeRect(g.x,g.y,g.width,g.height)}return this};c.fn.drawArc=function(e){var d=this.loadCanvas(),g=c.extend({},a.defaults,e),f=1;b(d,g);if(g.inDegrees===true){f=Math.PI/180}if(g.fromCenter===false){g.x+=g.radius;g.y+=g.radius}d.beginPath();d.arc(g.x,g.y,g.radius,(g.start*f)-(Math.PI/2),(g.end*f)-(Math.PI/2),g.ccw);d.fill();d.stroke();d.closePath();return this};c.fn.drawEllipse=function(e){var d=this.loadCanvas(),g=c.extend({},a.defaults,e),f=g.width*(4/3);b(d,g);if(g.fromCenter===false){g.x+=(g.width/2);g.y+=(g.height/2)}g.x+=1e-10;g.y+=1e-10;d.beginPath();d.moveTo(g.x,g.y-g.height/2);d.bezierCurveTo(g.x-f/2,g.y-g.height/2,g.x-f/2,g.y+g.height/2,g.x,g.y+g.height/2);d.bezierCurveTo(g.x+f/2,g.y+g.height/2,g.x+f/2,g.y-g.height/2,g.x,g.y-g.height/2);d.closePath();d.fill();d.stroke();return this};c.fn.drawLine=function(f){var e=this.loadCanvas(),i=c.extend({},a.defaults,f),h,g,d;b(e,i);e.beginPath();e.moveTo(i.x1,i.y1);for(d=2;d<Number.MAX_VALUE;d+=1){h=i["x"+d];g=i["y"+d];if(h&&g){e.lineTo(h,g)}else{break}}if(i.closed===true){e.closePath();e.fill();e.stroke()}else{e.fill();e.stroke();e.closePath()}return this};c.fn.drawQuad=function(f){var e=this.loadCanvas(),k=c.extend({},a.defaults,f),i,g,j,h,d;b(e,k);e.beginPath();e.moveTo(k.x1,k.y1);for(d=2;d<Number.MAX_VALUE;d+=1){i=k["x"+d];g=k["y"+d];j=k["cx"+(d-1)];h=k["cy"+(d-1)];if(i&&g&&j&&h){e.quadraticCurveTo(j,h,i,g)}else{break}}if(k.closed===true){e.closePath();e.fill();e.stroke()}else{e.fill();e.stroke();e.closePath()}return this};c.fn.drawBezier=function(p){var q=this.loadCanvas(),k=c.extend({},a.defaults,p),j=2,f=1,h,g,o,e,n,d,m;b(q,k);q.beginPath();q.moveTo(k.x1,k.y1);for(m=2;m<Number.MAX_VALUE;m+=1){h=k["x"+j];g=k["y"+j];o=k["cx"+f];e=k["cy"+f];n=k["cx"+(f+1)];d=k["cy"+(f+1)];if(h&&g&&o&&e&&n&&d){q.bezierCurveTo(o,e,n,d,h,g);j+=1;f+=2}else{break}}if(k.closed===true){q.closePath();q.fill();q.stroke()}else{q.fill();q.stroke();q.closePath()}return this};c.fn.drawText=function(e){var d=this.loadCanvas(),f=c.extend({},a.defaults,e);b(d,f);d.textBaseline=f.baseline;d.textAlign=f.align;d.font=f.font;d.strokeText(f.text,f.x,f.y);d.fillText(f.text,f.x,f.y);return this};c.fn.drawImage=function(g){var d=this.loadCanvas(),h=c.extend({},a.defaults,g),e=document.createElement("img"),f;e.src=h.source;b(d,h);f=e.width/e.height;if(g.width!==undefined){e.width=g.width;e.height=e.width/f}if(g.height!==undefined){e.height=g.height;e.width=e.height*f}if(g.width!==undefined&&g.height!==undefined){e.width=g.width;e.height=g.height}if(h.fromCenter===true){h.x-=(e.width/2);h.y-=(e.height/2)}d.drawImage(e,h.x,h.y,e.width,e.height);return this};c.fn.drawPolygon=function(g){var m=this.loadCanvas(),e=c.extend({},a.defaults,g),d,l,k,j,h=1,f;b(m,e);if(e.sides>=3){if(e.inDegrees===true){h=Math.PI/180}d=(Math.PI/2)+(Math.PI/e.sides)+(e.angle*h);l=(Math.PI*2)/e.sides;for(f=0;f<e.sides;f+=1){k=e.x+(e.radius*Math.cos(d))+1e-10;j=e.y+(e.radius*Math.sin(d))+1e-10;if(e.fromCenter===false){k+=e.radius;j+=e.radius}e["x"+(f+1)]=k;e["y"+(f+1)]=j;d+=l}e.closed=true;this.drawLine(e)}return this};window.jCanvas=a}(jQuery));